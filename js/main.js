require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.stopLine(),app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.stopLine(),app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.stopLine(),app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.stopLine(),app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/story":app.stopLine(),app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.stopLine(),app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.printTestPages("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.printTestPages("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.printTestPages("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.trigger("Tests:Cleared"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.loadedModules=[],this.on("Display:Load",function(t){e.render(),console.log('Рендер экрана "'+t+'" завершен')}),console.log("Инициализация приложения завершена")},route:function(e,t){console.log("Запускаем Route к ",e," c модулями ",t),this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){console.log('Экран "'+e+'" загружен'),_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(o,s){console.log('Модуль "'+a+'" загружен'),t[a+"Html"]=$(s),_.extend(t,o),t.loadCss(a,"module"),t.loadedModules.push(a),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){console.log("Создаем шаблон Handlebars",e,t);var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start(),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},o=this;o.settings={};var s=function(){o.settings=e.extend({},r,a),o.el=t,n()},n=function(){var t="",a="",r="",s="",n=o.settings.preload,p=o.settings.autoplay,d=o.settings.loop;a=n?'preload="false"':"",r=p?'autoplay="false"':"",s=d?'loop="false"':"",t+='<video id="'+o.settings.videoid+'"'+a+r+s,o.settings.poster&&(t+=' poster="'+o.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var l=0;l<o.settings.types.length;l++)t+='<source src="'+o.settings.path+o.settings.filename+"."+o.settings.types[l]+'" type="video/'+o.settings.types[l]+'" />';t+="</video>",o.el.append(t),o.videoEl=document.getElementById(o.settings.videoid),o.$videoEl=e(o.videoEl),o.$videoEl.fadeIn(0),i()},i=function(){var e=p();o.$videoEl.width(e*o.settings.width),o.$videoEl.height(e*o.settings.height),"undefined"!=typeof o.settings.align&&d()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,s=o.settings.width/o.settings.height,n=a/o.settings.height;return r>=s&&(n=t/o.settings.width),n},d=function(){var t=(e(window).width()>>1)-(o.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(o.$videoEl.height()>>1)|0;return"centerXY"==o.settings.align?void o.$videoEl.css({left:t,top:a}):"centerX"==o.settings.align?void o.$videoEl.css("left",t):"centerY"==o.settings.align?void o.$videoEl.css("top",a):void 0};s(),e(window).resize(function(){i()})}}($)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInN0b3BMaW5lIiwicHJpbnRCb29rUGFnZXMiLCJicmVhZGNydW1ic1JlbmRlciIsImdvVG9wIiwicmVwbGFjZSIsInByaW50VmlkZW8iLCJnb0JvdHRvbSIsInByaW50TWFwIiwicHJpbnRUZXN0UGFnZXMiLCJnb0JhY2siLCJ0ZXN0QnJlYWRjcnVtYnNSZW5kZXIiLCJnb0Zyb250IiwiZ2V0QWN0aXZlVGFiIiwiYXVkaW9Td2ljdGNoZXIiLCJkZWFjdGl2YXRlUXVlc3Rpb24iLCJjaGVja0ltYWdlUHJvZ3Jlc3MiLCJ3aW5kb3ciLCJpbml0aWFsaXplIiwic2VsZiIsImxvYWRlZE1vZHVsZXMiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwiY29uc29sZSIsImxvZyIsInJvdXRlIiwibGluayIsIm1vZHVsZXNMaXN0IiwibG9hZE1vZHVsZXMiLCJvZmYiLCJtb2R1bGVzIiwibG9hZFRlbXBsYXRlIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsInB1c2giLCJsZW5ndGgiLCJtZCIsInBhcnRVcGwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwicmVsIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJIYW5kbGViYXJzVGVtcGxhdGUiLCJzZWxlY3RvciIsImRhdGEiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJBcHBSb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZXMiLCJsZXNzb25zIiwiZ2FtZXMvOnRlc3QiLCJib29rLzpuYW1lIiwidmlkZW8vOm5hbWUiLCJyb3V0ZXIiLCJzZXRUaW1lb3V0Iiwic3RhcnQiLCJiYWNrZ3JvdW5kVmlkZW8iLCJkZWZhdWx0cyIsInZpZGVvaWQiLCJhdXRvcGxheSIsImxvb3AiLCJwcmVsb2FkIiwicGx1Z2luIiwic2V0dGluZ3MiLCJpbml0IiwiYnVpbGRWaWRlbyIsInByZWxvYWRTdHJpbmciLCJhdXRvcGxheVN0cmluZyIsImxvb3BTdHJpbmciLCJfcHJlbG9hZCIsIl9hdXRvcGxheSIsIl9sb29wIiwicG9zdGVyIiwidHlwZXMiLCJwYXRoIiwiZmlsZW5hbWUiLCJhcHBlbmQiLCJ2aWRlb0VsIiwiZ2V0RWxlbWVudEJ5SWQiLCIkdmlkZW9FbCIsImZhZGVJbiIsInNldFByb3BvcnRpb24iLCJwcm9wb3J0aW9uIiwiZ2V0UHJvcG9ydGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYWxpZ24iLCJjZW50ZXJWaWRlbyIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0Iiwid2luZG93UHJvcG9ydGlvbiIsIm9yaWdQcm9wb3J0aW9uIiwiY2VudGVyWCIsImNlbnRlclkiLCJsZWZ0IiwidG9wIiwicmVzaXplIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsUUFDUEMsUUFBUyxTQUNUQyxPQUNDQyxPQUFVLHFCQUNWQyxTQUFZLG9CQUNaQyxLQUFRLFlBQ1JDLFdBQWMsd0JBQ2RDLFdBQWMsd0JBQ2RDLFNBQVksZ0NBRWJDLE1BQ0NMLFVBQ0NNLE1B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QkssRUFBZWhILEVBQUU4QixRQUFROEUsU0FDekJLLEVBQW1CRixFQUFjQyxFQUNqQ0UsRUFBaUI3QixFQUFPQyxTQUFTcUIsTUFBUXRCLEVBQU9DLFNBQVNzQixPQUN6REgsRUFBYU8sRUFBZTNCLEVBQU9DLFNBQVNzQixNQU1oRCxPQUpJSyxJQUFvQkMsSUFDdEJULEVBQWFNLEVBQWMxQixFQUFPQyxTQUFTcUIsT0FHdENGLEdBR0xLLEVBQWMsV0FDaEIsR0FBSUssSUFBWW5ILEVBQUU4QixRQUFRNkUsU0FBVyxJQUFNdEIsRUFBT2lCLFNBQVNLLFNBQVcsR0FBTSxFQUN4RVMsR0FBWXBILEVBQUU4QixRQUFROEUsVUFBWSxJQUFNdkIsRUFBT2lCLFNBQVNNLFVBQVksR0FBTSxDQUU5RSxPQUE2QixZQUF6QnZCLEVBQU9DLFNBQVN1QixVQUNsQnhCLEdBQU9pQixTQUFTNUYsS0FBTTJHLEtBQVFGLEVBQVNHLElBQU9GLElBSW5CLFdBQXpCL0IsRUFBT0MsU0FBU3VCLFVBQ2xCeEIsR0FBT2lCLFNBQVM1RixJQUFJLE9BQVF5RyxHQUlELFdBQXpCOUIsRUFBT0MsU0FBU3VCLFVBQ2xCeEIsR0FBT2lCLFNBQVM1RixJQUFJLE1BQU8wRyxHQUQ3QixPQU1GN0IsS0FFQXZGLEVBQUU4QixRQUFReUYsT0FBTyxXQUFhZixRQUUvQnhHIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlLmNvbmZpZyh7XHJcblx0YmFzZVVybDogJ3ZlbmRvcicsXHJcblx0cGF0aHM6IHtcclxuXHRcdCdqcXVlcnknOiAnanF1ZXJ5L2Rpc3QvanF1ZXJ5JyxcclxuXHRcdCdiYWNrYm9uZSc6ICdiYWNrYm9uZS9iYWNrYm9uZScsXHJcblx0XHQndGV4dCc6ICd0ZXh0L3RleHQnLFxyXG5cdFx0J3VuZGVyc2NvcmUnOiAndW5kZXJzY29yZS91bmRlcnNjb3JlJyxcclxuXHRcdCdoYW5kbGViYXJzJzogJ2hhbmRsZWJhcnMvaGFuZGxlYmFycycsXHJcblx0XHQncGFyYWxsYXgnOiAncGFyYWxsYXgvZGVwbG95L3BhcmFsbGF4Lm1pbidcclxuXHR9LFxyXG5cdHNoaW06IHtcclxuXHRcdCdiYWNrYm9uZSc6IHtcclxuXHRcdFx0ZGVwczogWyd1bmRlcnNjb3JlJywgJ2pxdWVyeSddXHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbnZhciBhcHAsXHJcblx0SGFuZGxlYmFycztcclxucmVxdWlyZShbXHJcblx0J2hhbmRsZWJhcnMnLFxyXG5cdCdqcXVlcnknLFxyXG5cdCd0ZXh0JyxcclxuXHQnYmFja2JvbmUnLFxyXG5cdCd1bmRlcnNjb3JlJyxcclxuXHRcInBhcmFsbGF4XCJcclxuXSwgZnVuY3Rpb24oaGFuZGxlYmFycykge1xyXG5cdEhhbmRsZWJhcnMgPSBoYW5kbGViYXJzO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEhhbmRsZWJhcnMgSGVscGVycy0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0SGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcihcIm1hdGhcIiwgZnVuY3Rpb24obHZhbHVlLCBvcGVyYXRvciwgcnZhbHVlLCBvcHRpb25zKSB7XHJcblx0ICAgIGx2YWx1ZSA9IHBhcnNlRmxvYXQobHZhbHVlKTtcclxuXHQgICAgcnZhbHVlID0gcGFyc2VGbG9hdChydmFsdWUpO1xyXG5cdCAgICAgICAgXHJcblx0ICAgIHJldHVybiB7XHJcblx0ICAgICAgICBcIitcIjogbHZhbHVlICsgcnZhbHVlLFxyXG5cdCAgICAgICAgXCItXCI6IGx2YWx1ZSAtIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiKlwiOiBsdmFsdWUgKiBydmFsdWUsXHJcblx0ICAgICAgICBcIi9cIjogbHZhbHVlIC8gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIlXCI6IGx2YWx1ZSAlIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiPT1cIjogbHZhbHVlID09IHJ2YWx1ZVxyXG5cdCAgICB9W29wZXJhdG9yXTtcclxuXHR9KTtcclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkNvbmQnLCBmdW5jdGlvbiAodjEsIG9wZXJhdG9yLCB2Miwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICBzd2l0Y2ggKG9wZXJhdG9yKSB7XHJcblx0ICAgICAgICBjYXNlICc9PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA9PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPT09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPCc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA8PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnPic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+PSc6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSA+PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnJiYnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgJiYgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJ3x8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIHx8IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBkZWZhdWx0OlxyXG5cdCAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgIH1cclxuXHR9KTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBBcHAgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRBcHAgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZCh7XHJcblx0XHRlbDogJCgnI2FwcCcpLFxyXG5cdFx0ZXZlbnRzOiB7XHJcblx0ICAgIFwiY2xpY2sgYVwiOlwib3BlblwiXHJcblx0ICB9LFxyXG5cdCAgb3BlbjogZnVuY3Rpb24oZSl7XHJcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcclxuXHRcdFx0dmFyIHVybCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoXCJhXCIpLmF0dHIoXCJocmVmXCIpO1xyXG5cdFxyXG5cdFx0XHRzd2l0Y2ggKHVybCl7XHJcblx0XHRcdFx0Y2FzZSBcIiNsZXNzb25zXCI6XHJcblx0XHRcdFx0XHQkKFwiaHRtbCxib2R5XCIpLmNzcyhcIm92ZXJmbG93LXlcIixcImhpZGRlblwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5zdG9wTGluZSgpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwic3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2Jvb2svYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5zdG9wTGluZSgpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50Qm9va1BhZ2VzKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvVG9wKCk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3ZpZGVvL2FudGlxXCI6XHJcblx0XHRcdFx0ICAgIGFwcC5zdG9wTGluZSgpO1xyXG5cdFx0XHRcdCAgICBhcHAucHJpbnRWaWRlbyhcImFudGlxXCIpO1xyXG5cdFx0XHRcdCAgICBhcHAuZ29Cb3R0b20oKTtcclxuXHRcdFx0XHQgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5zdG9wTGluZSgpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VmlkZW8oXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQmNC70LvRjtGB0YLRgNCw0YbQuNC4INC6INCx0LDRgdC90Y/QvFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRWaWRlbyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Cb3R0b20oKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcImFudGlxXCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwiYW50aXFcIik7XHJcblx0XHRcdFx0IFx0YXBwLmdvQmFjaygpO1xyXG5cdFx0ICAgICBcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiLFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dhbWVzL3N0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFRlc3RQYWdlcyhcInN0b3J5XCIpO1xyXG5cdFx0XHRcdCAgICBhcHAuZ29CYWNrKCk7XHJcblx0XHQgICAgICBcdFx0YXBwLnRlc3RCcmVhZGNydW1ic1JlbmRlcihcItCY0LPRgNCwXCIsXCLQkdCw0YHQvdC4INCa0YDRi9C70L7QstCwXCIsXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFRlc3RQYWdlcyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JhY2soKTtcclxuXHRcdCAgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIixcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dvRnJvbnRcIjpcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNyZXNldFwiOlxyXG5cdFx0XHRcdFx0YXBwLnRyaWdnZXIoJ1Rlc3RzOkNsZWFyZWQnKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIjbGVzc29uc1wiLCB7dHJpZ2dlcjp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3NvdW5kXCI6XHJcblx0XHRcdFx0XHRhcHAuYXVkaW9Td2ljdGNoZXIoKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZnJvbVRlc3RUb1ZpZGVvXCI6XHJcblx0XHRcdFx0XHRhcHAuZ29Cb3R0b20oKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLWFudGlxXCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtaGlzdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLmRlYWN0aXZhdGVRdWVzdGlvbih0aGlzKTtcclxuXHRcdFx0XHRcdGFwcC5jaGVja0ltYWdlUHJvZ3Jlc3MoKTtcclxuXHRcdFx0XHRcdGFwcC5nb0Zyb250KCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlIFwid3d3LnRyZXR5YWtvdmdhbGxlcnkucnVcIjpcclxuXHRcdFx0XHRcdHdpbmRvdy5vcGVuKCdodHRwOi8vd3d3LnRyZXR5YWtvdmdhbGxlcnkucnUvJywgJ19ibGFuaycpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHQgIH0sXHJcblx0XHRpbml0aWFsaXplOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHR0aGlzLmxvYWRlZE1vZHVsZXMgPSBbXTtcclxuXHRcclxuXHRcdFx0dGhpcy5vbignRGlzcGxheTpMb2FkJywgZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0XHRzZWxmLnJlbmRlcigpO1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQoNC10L3QtNC10YAg0Y3QutGA0LDQvdCwIFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQstC10YDRiNC10L0nKTtcclxuXHRcdFx0fSk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyb3V0ZTogZnVuY3Rpb24obGluaywgbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcItCX0LDQv9GD0YHQutCw0LXQvCBSb3V0ZSDQuiBcIiwgbGluaywgXCIgYyDQvNC+0LTRg9C70Y/QvNC4IFwiLG1vZHVsZXNMaXN0KVxyXG5cdFx0XHR0aGlzLmxpbmsgPSBsaW5rO1xyXG5cdFxyXG5cdFx0XHQvLyDQn9GA0L7QstC10YDRj9C10Lwg0L3QsNC70LjRh9C40LUg0L/QvtC00LrQu9GO0YfQsNC10LzRi9GFINC80L7QtNGD0LvQtdC5LCDQtdGB0LvQuCDQuNGFINC90LXRgiDQt9Cw0LPRgNGD0LbQsNC10Lwg0YLQvtC70YzQutC+INGI0LDQsdC70L7QvVxyXG5cdFx0XHRpZiAoIW1vZHVsZXNMaXN0KXtcclxuXHRcdFx0XHR0aGlzLmxvYWRUZW1wbGF0ZShsaW5rKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyDQndCw0YjQu9C4INC80L7QtNGD0LvRjCwg0LjQu9C4INC80L7QtNGD0LvQuC4g0JfQsNC/0YPRgdC60LDQtdC8INC40YUg0LfQsNCz0YDRg9C30LrRgyDQsiDQutC+0L3RgtC10LrRgdGCINC/0YDQuNC70L7QttC10L3QuNGPLlxyXG5cdFx0XHRcdHRoaXMubG9hZE1vZHVsZXMobW9kdWxlc0xpc3QpO1xyXG5cdFx0XHRcdC8vINCc0L7QtNGD0LvRjCDQuNC70Lgg0LzQvtC00YPQu9C4INC30LDQs9GA0YPQttC10L3Riy4g0J3QsNGH0LjQvdCw0LXQvCDQt9Cw0LPRgNGD0LfQutGDINGI0LDQsdC70L7QvdCwLlxyXG5cdFx0XHRcdHRoaXMub2ZmKCdNb2R1bGU6TG9hZCcpLm9uKCdNb2R1bGU6TG9hZCcsIGZ1bmN0aW9uKG1vZHVsZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKHRoaXMubGluayk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQvNC+0LTRg9C70Y8o0LXQuSlcIicgKyBtb2R1bGVzICsgJ1wiINC30LDQstC10YDRiNC10L3QsCcpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ9CX0LDQs9GA0YPQt9C60LAg0K3QutGA0LDQvdCwXCInICsgdGhpcy5saW5rICsgJ1wiINC90LDRh9Cw0LvQsNGB0YwnKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRUZW1wbGF0ZTogZnVuY3Rpb24oZGlzcGxheU5hbWUpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHRyZXF1aXJlKFtcclxuXHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUsXHJcblx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvZGlzcGxheXMvJyArIGRpc3BsYXlOYW1lICsgJy8nICsgZGlzcGxheU5hbWUgKyAnLmh0bWwnLFxyXG5cdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKCfQrdC60YDQsNC9IFwiJyArIGRpc3BsYXlOYW1lICsgJ1wiINC30LDQs9GA0YPQttC10L0nKTtcclxuXHRcdFx0XHRfLmV4dGVuZChzZWxmLCBqcyk7XHJcblx0XHRcdFx0c2VsZi5odG1sID0gJChodG1sKTtcclxuXHRcdFx0XHRzZWxmLmxvYWRDc3MoZGlzcGxheU5hbWUsICdkaXNwbGF5Jyk7XHJcblx0XHRcdFx0c2VsZi50cmlnZ2VyKCdEaXNwbGF5OkxvYWQnLCBkaXNwbGF5TmFtZSk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcclxuXHRcdGxvYWRNb2R1bGVzOiBmdW5jdGlvbihtb2R1bGVzTGlzdCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8v0JfQsNCz0YDRg9C20LDQtdC8INC80L7QtNGD0LvQuC5cclxuXHRcdFx0bW9kdWxlc0xpc3QuZm9yRWFjaChmdW5jdGlvbihtb2R1bGUsIGkpe1xyXG5cdFx0XHRcdC8vIGlmICghXy5pbmNsdWRlKHNlbGYubG9hZGVkTW9kdWxlcywgbW9kdWxlKSkge1xyXG5cdFx0XHRcdFx0cmVxdWlyZShbXHJcblx0XHRcdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgLFxyXG5cdFx0XHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9tb2R1bGVzLycgKyBtb2R1bGUgKyAnLycgKyBtb2R1bGUgKyAnLmh0bWwnXHJcblx0XHRcdFx0XHRdLCBmdW5jdGlvbihqcywgaHRtbCkge1xyXG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JzQvtC00YPQu9GMIFwiJyArIG1vZHVsZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0XHRcdHNlbGZbbW9kdWxlICsgJ0h0bWwnXSA9ICQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkQ3NzKG1vZHVsZSwgJ21vZHVsZScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRlZE1vZHVsZXMucHVzaChtb2R1bGUpO1xyXG5cdFx0XHRcdFx0XHRpZigobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSkgPT09IGkpe1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIH1lbHNlIGlmIChtb2R1bGVzTGlzdC5sZW5ndGggLSAxID09IGkpe1xyXG5cdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ21vZHVsZXNMaXN0Lmxlbmd0aCcsIG1vZHVsZXNMaXN0Lmxlbmd0aClcclxuXHRcdFx0XHQvLyBcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkQ3NzOiBmdW5jdGlvbihtb2R1bGUsIG1kKSB7XHJcblx0XHRcdHZhciBwYXJ0VXBsID0gbWQgPT09ICdkaXNwbGF5JyA/ICdkaXNwbGF5cycgOiAnbW9kdWxlcyc7XHJcblx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRcdGxpbmsudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdFx0bGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdFx0bGluay5ocmVmID0gJy4uLy4uL3RlbXBsYXRlLycgKyBwYXJ0VXBsICsgJy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5jc3MnO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cmVuZGVySGFuZGxlYmFyc1RlbXBsYXRlOiBmdW5jdGlvbihzZWxlY3RvcixkYXRhKSB7XHJcblx0XHRcdGNvbnNvbGUubG9nKCfQodC+0LfQtNCw0LXQvCDRiNCw0LHQu9C+0L0gSGFuZGxlYmFycycsIHNlbGVjdG9yLCBkYXRhKTtcclxuXHRcclxuXHRcdFx0dmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKCQoc2VsZWN0b3IpLmh0bWwoKSk7XHJcblx0XHRcdHJldHVybiB0ZW1wbGF0ZShkYXRhKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHRhcHAgPSBuZXcgQXBwKCk7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gUm91dGVyIC0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblx0dmFyIEFwcFJvdXRlciA9IEJhY2tib25lLlJvdXRlci5leHRlbmQoe1xyXG5cdCAgICByb3V0ZXM6IHtcclxuXHQgICAgICAgIFwiXCI6IFwiZGVmYXVsdFJvdXRlXCIsXHJcblx0ICAgICAgICBcImxlc3NvbnNcIjpcImdhbGxlcnlcIixcclxuXHQgICAgICAgIFwiZ2FtZXMvOnRlc3RcIjpcImdhbWVzXCIsXHJcblx0ICAgICAgICBcImJvb2svOm5hbWVcIjpcInJlYWRlclwiLFxyXG5cdCAgICAgICAgXCJ2aWRlby86bmFtZVwiOlwidmlkZW9cIlxyXG5cdCAgICAgICAgLy8gbWF0Y2hlcyBodHRwOi8vZXhhbXBsZS5jb20vI2FueXRoaW5nLWhlcmVcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8vIEluaXRpYXRlIHRoZSByb3V0ZXJcclxuXHR2YXIgcm91dGVyID0gbmV3IEFwcFJvdXRlcjtcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmRlZmF1bHRSb3V0ZScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ21haW5TY3JlZW4nLCBbJ3ByZWxvYWRlciddKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6Z2FsbGVyeScsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYW1lcycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZWFkZXInLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6dmlkZW8nLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6cmVzZXQnLCBmdW5jdGlvbigpIHtcclxuXHQgICAgYXBwLnJvdXRlKCdnYWxsZXJ5JywgWydwcmVsb2FkZXInLCdhY2NvcmRpb24nLCAncmVkbGluZScsICdtYWlubWVudScsJ3JlYWRlcicsICd0cmFuc2Zvcm1lcjNEJywnbWFwcycsJ3ZpZGVvJywnYWJvdXQnLCd0ZXN0cyddKTtcclxuXHRcclxuXHQgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdCAgICAgIGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0ICAgIH0sMjAwKTtcclxuXHR9KVxyXG5cdFxyXG5cdC8vIFN0YXJ0IEJhY2tib25lIGhpc3RvcnkgYSBuZWNlc3Nhcnkgc3RlcCBmb3IgYm9va21hcmthYmxlIFVSTCdzXHJcblx0QmFja2JvbmUuaGlzdG9yeS5zdGFydCgpO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIFJvdXRlciAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdC8qXHJcblx0KiBqUXVlcnkgQmFja2dyb3VuZCB2aWRlbyBwbHVnaW4gZm9yIGpRdWVyeVxyXG5cdCogLS0tXHJcblx0KiBDb3B5cmlnaHQgMjAxMSwgVmljdG9yIENvdWxvbiAoaHR0cDovL3ZpY3RvcmNvdWxvbi5mcilcclxuXHQqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy5cclxuXHQqIGJhc2VkIG9uIGpRdWVyeSBQbHVnaW4gQm9pbGVycGxhdGUgMS4zXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24oJCkge1xyXG5cdFxyXG5cdCAgJC5iYWNrZ3JvdW5kVmlkZW8gPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICB2YXIgZGVmYXVsdHMgPSB7XHJcblx0ICAgICAgdmlkZW9pZDogXCJ2aWRlb19iYWNrZ3JvdW5kXCIsXHJcblx0ICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG5cdCAgICAgIGxvb3A6IGZhbHNlLFxyXG5cdCAgICAgIHByZWxvYWQ6IHRydWVcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgcGx1Z2luID0gdGhpcztcclxuXHRcclxuXHQgICAgcGx1Z2luLnNldHRpbmdzID0ge31cclxuXHRcclxuXHQgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICBwbHVnaW4uc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cdCAgICAgIHBsdWdpbi5lbCA9IGVsO1xyXG5cdFxyXG5cdCAgICAgIGJ1aWxkVmlkZW8oKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgYnVpbGRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgaHRtbCA9ICcnLFxyXG5cdCAgICAgICAgICBwcmVsb2FkU3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGxvb3BTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgX3ByZWxvYWQgPSBwbHVnaW4uc2V0dGluZ3MucHJlbG9hZCxcclxuXHQgICAgICAgICAgX2F1dG9wbGF5ID0gcGx1Z2luLnNldHRpbmdzLmF1dG9wbGF5LFxyXG5cdCAgICAgICAgICBfbG9vcCA9IHBsdWdpbi5zZXR0aW5ncy5sb29wO1xyXG5cdFxyXG5cdCAgICAgIGlmIChfcHJlbG9hZCkge1xyXG5cdCAgICAgICAgcHJlbG9hZFN0cmluZyA9ICdwcmVsb2FkPVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIHByZWxvYWRTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9hdXRvcGxheSkge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnYXV0b3BsYXk9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9sb29wKSB7XHJcblx0ICAgICAgICBsb29wU3RyaW5nID0gJ2xvb3A9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgbG9vcFN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBodG1sICs9ICc8dmlkZW8gaWQ9XCInK3BsdWdpbi5zZXR0aW5ncy52aWRlb2lkKydcIicgKyBwcmVsb2FkU3RyaW5nICsgYXV0b3BsYXlTdHJpbmcgKyBsb29wU3RyaW5nO1xyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucG9zdGVyKSB7XHJcblx0ICAgICAgICBodG1sICs9ICcgcG9zdGVyPVwiJyArIHBsdWdpbi5zZXR0aW5ncy5wb3N0ZXIgKyAnXCIgJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaHRtbCArPSAnc3R5bGU9XCJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7ei1pbmRleDoyO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7XCI+JztcclxuXHQgICAgICBmb3IodmFyIGk9MDsgaSA8IHBsdWdpbi5zZXR0aW5ncy50eXBlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgaHRtbCArPSAnPHNvdXJjZSBzcmM9XCInK3BsdWdpbi5zZXR0aW5ncy5wYXRoK3BsdWdpbi5zZXR0aW5ncy5maWxlbmFtZSsnLicrcGx1Z2luLnNldHRpbmdzLnR5cGVzW2ldKydcIiB0eXBlPVwidmlkZW8vJytwbHVnaW4uc2V0dGluZ3MudHlwZXNbaV0rJ1wiIC8+JztcclxuXHQgICAgICB9XHJcblx0ICAgICAgaHRtbCArPSAnPC92aWRlbz4nO1xyXG5cdCAgICAgIHBsdWdpbi5lbC5hcHBlbmQoaHRtbCk7XHJcblx0ICAgICAgcGx1Z2luLnZpZGVvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwbHVnaW4uc2V0dGluZ3MudmlkZW9pZCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsID0gJChwbHVnaW4udmlkZW9FbCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLmZhZGVJbigwKTtcclxuXHQgICAgICBzZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHNldFByb3BvcnRpb24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIHByb3BvcnRpb24gPSBnZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLndpZHRoKHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLndpZHRoKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLmhlaWdodCk7XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uc2V0dGluZ3MuYWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0ICAgICAgICBjZW50ZXJWaWRlbygpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgZ2V0UHJvcG9ydGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuXHQgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cdCAgICAgIHZhciB3aW5kb3dQcm9wb3J0aW9uID0gd2luZG93V2lkdGggLyB3aW5kb3dIZWlnaHQ7XHJcblx0ICAgICAgdmFyIG9yaWdQcm9wb3J0aW9uID0gcGx1Z2luLnNldHRpbmdzLndpZHRoIC8gcGx1Z2luLnNldHRpbmdzLmhlaWdodDtcclxuXHQgICAgICB2YXIgcHJvcG9ydGlvbiA9IHdpbmRvd0hlaWdodCAvIHBsdWdpbi5zZXR0aW5ncy5oZWlnaHQ7XHJcblx0XHJcblx0ICAgICAgaWYgKHdpbmRvd1Byb3BvcnRpb24gPj0gb3JpZ1Byb3BvcnRpb24pIHtcclxuXHQgICAgICAgIHByb3BvcnRpb24gPSB3aW5kb3dXaWR0aCAvIHBsdWdpbi5zZXR0aW5ncy53aWR0aDtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgcmV0dXJuIHByb3BvcnRpb247XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGNlbnRlclZpZGVvID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgdmFyIGNlbnRlclggPSAoKCQod2luZG93KS53aWR0aCgpID4+IDEpIC0gKHBsdWdpbi4kdmlkZW9FbC53aWR0aCgpID4+IDEpKSB8IDA7XHJcblx0ICAgICAgdmFyIGNlbnRlclkgPSAoKCQod2luZG93KS5oZWlnaHQoKSA+PiAxKSAtIChwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KCkgPj4gMSkpIHwgMDtcclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYWScpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoeyAnbGVmdCc6IGNlbnRlclgsICd0b3AnOiBjZW50ZXJZIH0pO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygnbGVmdCcsIGNlbnRlclgpO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJZJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygndG9wJywgY2VudGVyWSk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGluaXQoKTtcclxuXHRcclxuXHQgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsgc2V0UHJvcG9ydGlvbigpOyB9KTtcclxuXHQgIH1cclxuXHR9KSgkKTtcclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
