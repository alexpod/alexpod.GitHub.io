require.config({baseUrl:"vendor",paths:{jquery:"jquery/dist/jquery.min",backbone:"backbone/backbone",text:"text/text",underscore:"underscore/underscore",handlebars:"handlebars/handlebars",parallax:"parallax/deploy/parallax.min"},shim:{backbone:{deps:["underscore","jquery"]}}});var app,Handlebars;require(["handlebars","jquery","text","backbone","underscore","parallax"],function(e){Handlebars=e,Handlebars.registerHelper("math",function(e,t,a,r){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a,"==":e==a}[t]}),Handlebars.registerHelper("ifCond",function(e,t,a,r){switch(t){case"==":return e==a?r.fn(this):r.inverse(this);case"===":return e===a?r.fn(this):r.inverse(this);case"<":return a>e?r.fn(this):r.inverse(this);case"<=":return a>=e?r.fn(this):r.inverse(this);case">":return e>a?r.fn(this):r.inverse(this);case">=":return e>=a?r.fn(this):r.inverse(this);case"&&":return e&&a?r.fn(this):r.inverse(this);case"||":return e||a?r.fn(this):r.inverse(this);default:return r.inverse(this)}}),App=Backbone.View.extend({el:$("#app"),events:{"click a":"open"},open:function(e){e.preventDefault();var t=$(e.target).closest("a").attr("href");switch(t){case"#lessons":$("html,body").css("overflow-y","hidden"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#book/history":app.stopLine(),app.printBookPages("history"),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/story":app.stopLine(),app.printBookPages("story"),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#book/antiq":app.stopLine(),app.printBookPages("antiq"),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),app.goTop(),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/antiq":app.stopLine(),app.printVideo("antiq"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#video/story":app.stopLine(),app.printVideo("story"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#video/history":app.stopLine(),app.printVideo("history"),app.goBottom(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"#games/antiq":app.printMap("antiq"),app.printTestPages("antiq"),app.goBack(),app.testBreadcrumbsRender("Игра","Античные мотивы","antiq"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/story":app.printMap("story"),app.printTestPages("story"),app.goBack(),app.testBreadcrumbsRender("Игра","Басни Крылова","story"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#games/history":app.printMap("history"),app.printTestPages("history"),app.goBack(),app.testBreadcrumbsRender("Игра","Страницы русской истории","history"),Backbone.history.navigate(t,{trigger:!1,replace:!0});break;case"#goFront":app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab()),Backbone.history.navigate("#lessons",{trigger:!1,replace:!0});break;case"#reset":app.trigger("Tests:Cleared"),Backbone.history.navigate("#lessons",{trigger:!0});break;case"#sound":app.audioSwictcher();break;case"#fromTestToVideo":app.goBottom();break;case"#getRevard-antiq":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Античные мотивы");break;case"#getRevard-story":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Иллюстрации к басням");break;case"#getRevard-history":app.deactivateQuestion(this),app.checkImageProgress(),app.goFront(),app.breadcrumbsRender("Уроки Валентина Серова","Страницы русской истории");break;case"www.tretyakovgallery.ru":window.open("http://www.tretyakovgallery.ru/","_blank")}},initialize:function(){var e=this;this.loadedModules=[],this.on("Display:Load",function(t){e.render()})},route:function(e,t){this.link=e,t?(this.loadModules(t),this.off("Module:Load").on("Module:Load",function(e){this.loadTemplate(this.link),console.log('Загрузка модуля(ей)"'+e+'" завершена'),console.log('Загрузка Экрана"'+this.link+'" началась')})):this.loadTemplate(e)},loadTemplate:function(e){var t=this;require(["../../template/displays/"+e+"/"+e,"text!../../template/displays/"+e+"/"+e+".html"],function(a,r){_.extend(t,a),t.html=$(r),t.loadCss(e,"display"),t.trigger("Display:Load",e)})},loadModules:function(e){var t=this;e.forEach(function(a,r){require(["../../template/modules/"+a+"/"+a,"text!../../template/modules/"+a+"/"+a+".html"],function(o,s){t[a+"Html"]=$(s),_.extend(t,o),t.loadCss(a,"module"),t.loadedModules.push(a),e.length-1===r&&t.trigger("Module:Load",e)})})},loadCss:function(e,t){var a="display"===t?"displays":"modules",r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href="../../template/"+a+"/"+e+"/"+e+".css",document.getElementsByTagName("head")[0].appendChild(r)},renderHandlebarsTemplate:function(e,t){var a=Handlebars.compile($(e).html());return a(t)}}),app=new App;var t=Backbone.Router.extend({routes:{"":"defaultRoute",lessons:"gallery","games/:test":"games","book/:name":"reader","video/:name":"video"}}),a=new t;a.on("route:defaultRoute",function(){app.route("mainScreen",["preloader"])}),a.on("route:gallery",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:games",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reader",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:video",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),a.on("route:reset",function(){app.route("gallery",["preloader","accordion","redline","mainmenu","reader","transformer3D","maps","video","about","tests"]),setTimeout(function(){app.breadcrumbsRender("Уроки Валентина Серова",app.getActiveTab())},200)}),Backbone.history.start({pushState:!1}),function(e){e.backgroundVideo=function(t,a){var r={videoid:"video_background",autoplay:!1,loop:!1,preload:!0},o=this;o.settings={};var s=function(){o.settings=e.extend({},r,a),o.el=t,n()},n=function(){var t="",a="",r="",s="",n=o.settings.preload,p=o.settings.autoplay,d=o.settings.loop;a=n?'preload="false"':"",r=p?'autoplay="false"':"",s=d?'loop="false"':"",t+='<video id="'+o.settings.videoid+'"'+a+r+s,o.settings.poster&&(t+=' poster="'+o.settings.poster+'" '),t+='style="display:none;position:fixed;top:0;left:0;bottom:0;right:0;z-index:2;width:100%;height:100%;">';for(var l=0;l<o.settings.types.length;l++)t+='<source src="'+o.settings.path+o.settings.filename+"."+o.settings.types[l]+'" type="video/'+o.settings.types[l]+'" />';t+="</video>",o.el.append(t),o.videoEl=document.getElementById(o.settings.videoid),o.$videoEl=e(o.videoEl),o.$videoEl.fadeIn(0),i()},i=function(){var e=p();o.$videoEl.width(e*o.settings.width),o.$videoEl.height(e*o.settings.height),"undefined"!=typeof o.settings.align&&d()},p=function(){var t=e(window).width(),a=e(window).height(),r=t/a,s=o.settings.width/o.settings.height,n=a/o.settings.height;return r>=s&&(n=t/o.settings.width),n},d=function(){var t=(e(window).width()>>1)-(o.$videoEl.width()>>1)|0,a=(e(window).height()>>1)-(o.$videoEl.height()>>1)|0;return"centerXY"==o.settings.align?void o.$videoEl.css({left:t,top:a}):"centerX"==o.settings.align?void o.$videoEl.css("left",t):"centerY"==o.settings.align?void o.$videoEl.css("top",a):void 0};s(),e(window).resize(function(){i()})}}($)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVxdWlyZSIsImNvbmZpZyIsImJhc2VVcmwiLCJwYXRocyIsImpxdWVyeSIsImJhY2tib25lIiwidGV4dCIsInVuZGVyc2NvcmUiLCJoYW5kbGViYXJzIiwicGFyYWxsYXgiLCJzaGltIiwiZGVwcyIsImFwcCIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsImx2YWx1ZSIsIm9wZXJhdG9yIiwicnZhbHVlIiwib3B0aW9ucyIsInBhcnNlRmxvYXQiLCIrIiwiLSIsIioiLCIvIiwiJSIsIj09IiwidjEiLCJ2MiIsImZuIiwidGhpcyIsImludmVyc2UiLCJBcHAiLCJCYWNrYm9uZSIsIlZpZXciLCJleHRlbmQiLCJlbCIsIiQiLCJldmVudHMiLCJjbGljayBhIiwib3BlbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInVybCIsInRhcmdldCIsImNsb3Nlc3QiLCJhdHRyIiwiY3NzIiwiaGlzdG9yeSIsIm5hdmlnYXRlIiwidHJpZ2dlciIsInN0b3BMaW5lIiwicHJpbnRCb29rUGFnZXMiLCJicmVhZGNydW1ic1JlbmRlciIsImdvVG9wIiwicmVwbGFjZSIsInByaW50VmlkZW8iLCJnb0JvdHRvbSIsInByaW50TWFwIiwicHJpbnRUZXN0UGFnZXMiLCJnb0JhY2siLCJ0ZXN0QnJlYWRjcnVtYnNSZW5kZXIiLCJnb0Zyb250IiwiZ2V0QWN0aXZlVGFiIiwiYXVkaW9Td2ljdGNoZXIiLCJkZWFjdGl2YXRlUXVlc3Rpb24iLCJjaGVja0ltYWdlUHJvZ3Jlc3MiLCJ3aW5kb3ciLCJpbml0aWFsaXplIiwic2VsZiIsImxvYWRlZE1vZHVsZXMiLCJvbiIsImRpc3BsYXlOYW1lIiwicmVuZGVyIiwicm91dGUiLCJsaW5rIiwibW9kdWxlc0xpc3QiLCJsb2FkTW9kdWxlcyIsIm9mZiIsIm1vZHVsZXMiLCJsb2FkVGVtcGxhdGUiLCJjb25zb2xlIiwibG9nIiwianMiLCJodG1sIiwiXyIsImxvYWRDc3MiLCJmb3JFYWNoIiwibW9kdWxlIiwiaSIsInB1c2giLCJsZW5ndGgiLCJtZCIsInBhcnRVcGwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwicmVsIiwiaHJlZiIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYXBwZW5kQ2hpbGQiLCJyZW5kZXJIYW5kbGViYXJzVGVtcGxhdGUiLCJzZWxlY3RvciIsImRhdGEiLCJ0ZW1wbGF0ZSIsImNvbXBpbGUiLCJBcHBSb3V0ZXIiLCJSb3V0ZXIiLCJyb3V0ZXMiLCIiLCJsZXNzb25zIiwiZ2FtZXMvOnRlc3QiLCJib29rLzpuYW1lIiwidmlkZW8vOm5hbWUiLCJyb3V0ZXIiLCJzZXRUaW1lb3V0Iiwic3RhcnQiLCJwdXNoU3RhdGUiLCJiYWNrZ3JvdW5kVmlkZW8iLCJkZWZhdWx0cyIsInZpZGVvaWQiLCJhdXRvcGxheSIsImxvb3AiLCJwcmVsb2FkIiwicGx1Z2luIiwic2V0dGluZ3MiLCJpbml0IiwiYnVpbGRWaWRlbyIsInByZWxvYWRTdHJpbmciLCJhdXRvcGxheVN0cmluZyIsImxvb3BTdHJpbmciLCJfcHJlbG9hZCIsIl9hdXRvcGxheSIsIl9sb29wIiwicG9zdGVyIiwidHlwZXMiLCJwYXRoIiwiZmlsZW5hbWUiLCJhcHBlbmQiLCJ2aWRlb0VsIiwiZ2V0RWxlbWVudEJ5SWQiLCIkdmlkZW9FbCIsImZhZGVJbiIsInNldFByb3BvcnRpb24iLCJwcm9wb3J0aW9uIiwiZ2V0UHJvcG9ydGlvbiIsIndpZHRoIiwiaGVpZ2h0IiwiYWxpZ24iLCJjZW50ZXJWaWRlbyIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0Iiwid2luZG93UHJvcG9ydGlvbiIsIm9yaWdQcm9wb3J0aW9uIiwiY2VudGVyWCIsImNlbnRlclkiLCJsZWZ0IiwidG9wIiwicmVzaXplIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUUMsUUFDUEMsUUFBUyxTQUNUQyxPQUNDQyxPQUFVLHlCQUNWQyxTQUFZLG9CQUNaQyxLQUFRLFlBQ1JDLFdBQWMsd0JBQ2RDLFdBQWMsd0JBQ2RDLFNBQVksZ0NBRWJD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QUFhTSxFQUFjMUIsRUFBT0MsU0FBU3FCLE9BR3RDRixHQUdMSyxFQUFjLFdBQ2hCLEdBQUlLLElBQVlySCxFQUFFOEIsUUFBUStFLFNBQVcsSUFBTXRCLEVBQU9pQixTQUFTSyxTQUFXLEdBQU0sRUFDeEVTLEdBQVl0SCxFQUFFOEIsUUFBUWdGLFVBQVksSUFBTXZCLEVBQU9pQixTQUFTTSxVQUFZLEdBQU0sQ0FFOUUsT0FBNkIsWUFBekJ2QixFQUFPQyxTQUFTdUIsVUFDbEJ4QixHQUFPaUIsU0FBUzlGLEtBQU02RyxLQUFRRixFQUFTRyxJQUFPRixJQUluQixXQUF6Qi9CLEVBQU9DLFNBQVN1QixVQUNsQnhCLEdBQU9pQixTQUFTOUYsSUFBSSxPQUFRMkcsR0FJRCxXQUF6QjlCLEVBQU9DLFNBQVN1QixVQUNsQnhCLEdBQU9pQixTQUFTOUYsSUFBSSxNQUFPNEcsR0FEN0IsT0FNRjdCLEtBRUF6RixFQUFFOEIsUUFBUTJGLE9BQU8sV0FBYWYsUUFFL0IxRyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsicmVxdWlyZS5jb25maWcoe1xyXG5cdGJhc2VVcmw6ICd2ZW5kb3InLFxyXG5cdHBhdGhzOiB7XHJcblx0XHQnanF1ZXJ5JzogJ2pxdWVyeS9kaXN0L2pxdWVyeS5taW4nLFxyXG5cdFx0J2JhY2tib25lJzogJ2JhY2tib25lL2JhY2tib25lJyxcclxuXHRcdCd0ZXh0JzogJ3RleHQvdGV4dCcsXHJcblx0XHQndW5kZXJzY29yZSc6ICd1bmRlcnNjb3JlL3VuZGVyc2NvcmUnLFxyXG5cdFx0J2hhbmRsZWJhcnMnOiAnaGFuZGxlYmFycy9oYW5kbGViYXJzJyxcclxuXHRcdCdwYXJhbGxheCc6ICdwYXJhbGxheC9kZXBsb3kvcGFyYWxsYXgubWluJ1xyXG5cdH0sXHJcblx0c2hpbToge1xyXG5cdFx0J2JhY2tib25lJzoge1xyXG5cdFx0XHRkZXBzOiBbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5J11cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxudmFyIGFwcCxcclxuXHRIYW5kbGViYXJzO1xyXG5yZXF1aXJlKFtcclxuXHQnaGFuZGxlYmFycycsXHJcblx0J2pxdWVyeScsXHJcblx0J3RleHQnLFxyXG5cdCdiYWNrYm9uZScsXHJcblx0J3VuZGVyc2NvcmUnLFxyXG5cdFwicGFyYWxsYXhcIlxyXG5dLCBmdW5jdGlvbihoYW5kbGViYXJzKSB7XHJcblx0SGFuZGxlYmFycyA9IGhhbmRsZWJhcnM7XHJcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0gSGFuZGxlYmFycyBIZWxwZXJzLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHRIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwibWF0aFwiLCBmdW5jdGlvbihsdmFsdWUsIG9wZXJhdG9yLCBydmFsdWUsIG9wdGlvbnMpIHtcclxuXHQgICAgbHZhbHVlID0gcGFyc2VGbG9hdChsdmFsdWUpO1xyXG5cdCAgICBydmFsdWUgPSBwYXJzZUZsb2F0KHJ2YWx1ZSk7XHJcblx0ICAgICAgICBcclxuXHQgICAgcmV0dXJuIHtcclxuXHQgICAgICAgIFwiK1wiOiBsdmFsdWUgKyBydmFsdWUsXHJcblx0ICAgICAgICBcIi1cIjogbHZhbHVlIC0gcnZhbHVlLFxyXG5cdCAgICAgICAgXCIqXCI6IGx2YWx1ZSAqIHJ2YWx1ZSxcclxuXHQgICAgICAgIFwiL1wiOiBsdmFsdWUgLyBydmFsdWUsXHJcblx0ICAgICAgICBcIiVcIjogbHZhbHVlICUgcnZhbHVlLFxyXG5cdCAgICAgICAgXCI9PVwiOiBsdmFsdWUgPT0gcnZhbHVlXHJcblx0ICAgIH1bb3BlcmF0b3JdO1xyXG5cdH0pO1xyXG5cdEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmQ29uZCcsIGZ1bmN0aW9uICh2MSwgb3BlcmF0b3IsIHYyLCBvcHRpb25zKSB7XHJcblx0XHJcblx0ICAgIHN3aXRjaCAob3BlcmF0b3IpIHtcclxuXHQgICAgICAgIGNhc2UgJz09JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc9PT0nOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgPT09IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc8JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJzw9JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxIDw9IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICc+JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID4gdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGNhc2UgJz49JzpcclxuXHQgICAgICAgICAgICByZXR1cm4gKHYxID49IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcblx0ICAgICAgICBjYXNlICcmJic6XHJcblx0ICAgICAgICAgICAgcmV0dXJuICh2MSAmJiB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG5cdCAgICAgICAgY2FzZSAnfHwnOlxyXG5cdCAgICAgICAgICAgIHJldHVybiAodjEgfHwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgICAgIGRlZmF1bHQ6XHJcblx0ICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuXHQgICAgfVxyXG5cdH0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIEFwcCAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdEFwcCA9IEJhY2tib25lLlZpZXcuZXh0ZW5kKHtcclxuXHRcdGVsOiAkKCcjYXBwJyksXHJcblx0XHRldmVudHM6IHtcclxuXHQgICAgXCJjbGljayBhXCI6XCJvcGVuXCJcclxuXHQgIH0sXHJcblx0ICBvcGVuOiBmdW5jdGlvbihlKXtcclxuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdXJsID0gJChlLnRhcmdldCkuY2xvc2VzdChcImFcIikuYXR0cihcImhyZWZcIik7XHJcblx0XHJcblx0XHRcdHN3aXRjaCAodXJsKXtcclxuXHRcdFx0XHRjYXNlIFwiI2xlc3NvbnNcIjpcclxuXHRcdFx0XHRcdCQoXCJodG1sLGJvZHlcIikuY3NzKFwib3ZlcmZsb3cteVwiLFwiaGlkZGVuXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludEJvb2tQYWdlcyhcImhpc3RvcnlcIik7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCh0YLRgNCw0L3QuNGG0Ysg0YDRg9GB0YHQutC+0Lkg0LjRgdGC0L7RgNC40LhcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjYm9vay9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRCb29rUGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JDQvdGC0LjRh9C90YvQtSDQvNC+0YLQuNCy0YtcIik7XHJcblx0XHRcdFx0XHRhcHAuZ29Ub3AoKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjdmlkZW8vYW50aXFcIjpcclxuXHRcdFx0XHQgICAgYXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0ICAgIGFwcC5wcmludFZpZGVvKFwiYW50aXFcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdCAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9zdG9yeVwiOlxyXG5cdFx0XHRcdFx0YXBwLnN0b3BMaW5lKCk7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRWaWRlbyhcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLmdvQm90dG9tKCk7XHJcblx0XHRcdFx0XHRhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixcItCY0LvQu9GO0YHRgtGA0LDRhtC40Lgg0Log0LHQsNGB0L3Rj9C8XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiN2aWRlby9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuc3RvcExpbmUoKTtcclxuXHRcdFx0XHRcdGFwcC5wcmludFZpZGVvKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQodGC0YDQsNC90LjRhtGLINGA0YPRgdGB0LrQvtC5INC40YHRgtC+0YDQuNC4XCIpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9hbnRpcVwiOlxyXG5cdFx0XHRcdFx0YXBwLnByaW50TWFwKFwiYW50aXFcIik7XHJcblx0XHRcdFx0XHRhcHAucHJpbnRUZXN0UGFnZXMoXCJhbnRpcVwiKTtcclxuXHRcdFx0XHQgXHRhcHAuZ29CYWNrKCk7XHJcblx0XHQgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCQ0L3RgtC40YfQvdGL0LUg0LzQvtGC0LjQstGLXCIsXCJhbnRpcVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2FtZXMvc3RvcnlcIjpcclxuXHRcdFx0XHRcdGFwcC5wcmludE1hcChcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwic3RvcnlcIik7XHJcblx0XHRcdFx0ICAgIGFwcC5nb0JhY2soKTtcclxuXHRcdCAgICAgIFx0XHRhcHAudGVzdEJyZWFkY3J1bWJzUmVuZGVyKFwi0JjQs9GA0LBcIixcItCR0LDRgdC90Lgg0JrRgNGL0LvQvtCy0LBcIixcInN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh1cmwsIHt0cmlnZ2VyOmZhbHNlLHJlcGxhY2U6dHJ1ZX0pO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnYW1lcy9oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAucHJpbnRNYXAoXCJoaXN0b3J5XCIpO1xyXG5cdFx0XHRcdFx0YXBwLnByaW50VGVzdFBhZ2VzKFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHQgICAgYXBwLmdvQmFjaygpO1xyXG5cdFx0ICAgICAgXHRcdGFwcC50ZXN0QnJlYWRjcnVtYnNSZW5kZXIoXCLQmNCz0YDQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiLFwiaGlzdG9yeVwiKTtcclxuXHRcdFx0XHRcdEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUodXJsLCB7dHJpZ2dlcjpmYWxzZSxyZXBsYWNlOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ29Gcm9udFwiOlxyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLGFwcC5nZXRBY3RpdmVUYWIoKSk7XHJcblx0XHRcdFx0XHRCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiI2xlc3NvbnNcIiwge3RyaWdnZXI6ZmFsc2UscmVwbGFjZTp0cnVlfSk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI3Jlc2V0XCI6XHJcblx0XHRcdFx0XHRhcHAudHJpZ2dlcignVGVzdHM6Q2xlYXJlZCcpO1xyXG5cdFx0XHRcdFx0QmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIiNsZXNzb25zXCIsIHt0cmlnZ2VyOnRydWV9KTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjc291bmRcIjpcclxuXHRcdFx0XHRcdGFwcC5hdWRpb1N3aWN0Y2hlcigpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNmcm9tVGVzdFRvVmlkZW9cIjpcclxuXHRcdFx0XHRcdGFwcC5nb0JvdHRvbSgpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHJcblx0XHRcdFx0Y2FzZSBcIiNnZXRSZXZhcmQtYW50aXFcIjpcclxuXHRcdFx0XHRcdGFwcC5kZWFjdGl2YXRlUXVlc3Rpb24odGhpcyk7XHJcblx0XHRcdFx0XHRhcHAuY2hlY2tJbWFnZVByb2dyZXNzKCk7XHJcblx0XHRcdFx0XHRhcHAuZ29Gcm9udCgpO1xyXG5cdFx0XHRcdFx0YXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsXCLQkNC90YLQuNGH0L3Ri9C1INC80L7RgtC40LLRi1wiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFxyXG5cdFx0XHRcdGNhc2UgXCIjZ2V0UmV2YXJkLXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0JjQu9C70Y7RgdGC0YDQsNGG0LjQuCDQuiDQsdCw0YHQvdGP0LxcIik7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcclxuXHRcdFx0XHRjYXNlIFwiI2dldFJldmFyZC1oaXN0b3J5XCI6XHJcblx0XHRcdFx0XHRhcHAuZGVhY3RpdmF0ZVF1ZXN0aW9uKHRoaXMpO1xyXG5cdFx0XHRcdFx0YXBwLmNoZWNrSW1hZ2VQcm9ncmVzcygpO1xyXG5cdFx0XHRcdFx0YXBwLmdvRnJvbnQoKTtcclxuXHRcdFx0XHRcdGFwcC5icmVhZGNydW1ic1JlbmRlcihcItCj0YDQvtC60Lgg0JLQsNC70LXQvdGC0LjQvdCwINCh0LXRgNC+0LLQsFwiLFwi0KHRgtGA0LDQvdC40YbRiyDRgNGD0YHRgdC60L7QuSDQuNGB0YLQvtGA0LjQuFwiKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgXCJ3d3cudHJldHlha292Z2FsbGVyeS5ydVwiOlxyXG5cdFx0XHRcdFx0d2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cudHJldHlha292Z2FsbGVyeS5ydS8nLCAnX2JsYW5rJyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdCAgfSxcclxuXHRcdGluaXRpYWxpemU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHRoaXMubG9hZGVkTW9kdWxlcyA9IFtdO1xyXG5cdFxyXG5cdFx0XHR0aGlzLm9uKCdEaXNwbGF5OkxvYWQnLCBmdW5jdGlvbihkaXNwbGF5TmFtZSkge1xyXG5cdFx0XHRcdHNlbGYucmVuZGVyKCk7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0KDQtdC90LTQtdGAINGN0LrRgNCw0L3QsCBcIicgKyBkaXNwbGF5TmFtZSArICdcIiDQt9Cw0LLQtdGA0YjQtdC9Jyk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKCfQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDQv9GA0LjQu9C+0LbQtdC90LjRjyDQt9Cw0LLQtdGA0YjQtdC90LAnKTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRyb3V0ZTogZnVuY3Rpb24obGluaywgbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwi0JfQsNC/0YPRgdC60LDQtdC8IFJvdXRlINC6IFwiLCBsaW5rLCBcIiBjINC80L7QtNGD0LvRj9C80LggXCIsbW9kdWxlc0xpc3QpXHJcblx0XHRcdHRoaXMubGluayA9IGxpbms7XHJcblx0XHJcblx0XHRcdC8vINCf0YDQvtCy0LXRgNGP0LXQvCDQvdCw0LvQuNGH0LjQtSDQv9C+0LTQutC70Y7Rh9Cw0LXQvNGL0YUg0LzQvtC00YPQu9C10LksINC10YHQu9C4INC40YUg0L3QtdGCINC30LDQs9GA0YPQttCw0LXQvCDRgtC+0LvRjNC60L4g0YjQsNCx0LvQvtC9XHJcblx0XHRcdGlmICghbW9kdWxlc0xpc3Qpe1xyXG5cdFx0XHRcdHRoaXMubG9hZFRlbXBsYXRlKGxpbmspO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vINCd0LDRiNC70Lgg0LzQvtC00YPQu9GMLCDQuNC70Lgg0LzQvtC00YPQu9C4LiDQl9Cw0L/Rg9GB0LrQsNC10Lwg0LjRhSDQt9Cw0LPRgNGD0LfQutGDINCyINC60L7QvdGC0LXQutGB0YIg0L/RgNC40LvQvtC20LXQvdC40Y8uXHJcblx0XHRcdFx0dGhpcy5sb2FkTW9kdWxlcyhtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8g0JzQvtC00YPQu9GMINC40LvQuCDQvNC+0LTRg9C70Lgg0LfQsNCz0YDRg9C20LXQvdGLLiDQndCw0YfQuNC90LDQtdC8INC30LDQs9GA0YPQt9C60YMg0YjQsNCx0LvQvtC90LAuXHJcblx0XHRcdFx0dGhpcy5vZmYoJ01vZHVsZTpMb2FkJykub24oJ01vZHVsZTpMb2FkJywgZnVuY3Rpb24obW9kdWxlcykge1xyXG5cdFx0XHRcdFx0dGhpcy5sb2FkVGVtcGxhdGUodGhpcy5saW5rKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCfQl9Cw0LPRgNGD0LfQutCwINC80L7QtNGD0LvRjyjQtdC5KVwiJyArIG1vZHVsZXMgKyAnXCIg0LfQsNCy0LXRgNGI0LXQvdCwJyk7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygn0JfQsNCz0YDRg9C30LrQsCDQrdC60YDQsNC90LBcIicgKyB0aGlzLmxpbmsgKyAnXCIg0L3QsNGH0LDQu9Cw0YHRjCcpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0bG9hZFRlbXBsYXRlOiBmdW5jdGlvbihkaXNwbGF5TmFtZSkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdHJlcXVpcmUoW1xyXG5cdFx0XHRcdCcuLi8uLi90ZW1wbGF0ZS9kaXNwbGF5cy8nICsgZGlzcGxheU5hbWUgKyAnLycgKyBkaXNwbGF5TmFtZSxcclxuXHRcdFx0XHQndGV4dCEuLi8uLi90ZW1wbGF0ZS9kaXNwbGF5cy8nICsgZGlzcGxheU5hbWUgKyAnLycgKyBkaXNwbGF5TmFtZSArICcuaHRtbCcsXHJcblx0XHRcdF0sIGZ1bmN0aW9uKGpzLCBodG1sKSB7XHJcblx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0K3QutGA0LDQvSBcIicgKyBkaXNwbGF5TmFtZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0Xy5leHRlbmQoc2VsZiwganMpO1xyXG5cdFx0XHRcdHNlbGYuaHRtbCA9ICQoaHRtbCk7XHJcblx0XHRcdFx0c2VsZi5sb2FkQ3NzKGRpc3BsYXlOYW1lLCAnZGlzcGxheScpO1xyXG5cdFx0XHRcdHNlbGYudHJpZ2dlcignRGlzcGxheTpMb2FkJywgZGlzcGxheU5hbWUpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkTW9kdWxlczogZnVuY3Rpb24obW9kdWxlc0xpc3QpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL9CX0LDQs9GA0YPQttCw0LXQvCDQvNC+0LTRg9C70LguXHJcblx0XHRcdG1vZHVsZXNMaXN0LmZvckVhY2goZnVuY3Rpb24obW9kdWxlLCBpKXtcclxuXHRcdFx0XHQvLyBpZiAoIV8uaW5jbHVkZShzZWxmLmxvYWRlZE1vZHVsZXMsIG1vZHVsZSkpIHtcclxuXHRcdFx0XHRcdHJlcXVpcmUoW1xyXG5cdFx0XHRcdFx0XHQnLi4vLi4vdGVtcGxhdGUvbW9kdWxlcy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICxcclxuXHRcdFx0XHRcdFx0J3RleHQhLi4vLi4vdGVtcGxhdGUvbW9kdWxlcy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5odG1sJ1xyXG5cdFx0XHRcdFx0XSwgZnVuY3Rpb24oanMsIGh0bWwpIHtcclxuXHRcdFx0XHRcdFx0Ly9jb25zb2xlLmxvZygn0JzQvtC00YPQu9GMIFwiJyArIG1vZHVsZSArICdcIiDQt9Cw0LPRgNGD0LbQtdC9Jyk7XHJcblx0XHRcdFx0XHRcdHNlbGZbbW9kdWxlICsgJ0h0bWwnXSA9ICQoaHRtbCk7XHJcblx0XHRcdFx0XHRcdF8uZXh0ZW5kKHNlbGYsIGpzKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5sb2FkQ3NzKG1vZHVsZSwgJ21vZHVsZScpO1xyXG5cdFx0XHRcdFx0XHRzZWxmLmxvYWRlZE1vZHVsZXMucHVzaChtb2R1bGUpO1xyXG5cdFx0XHRcdFx0XHRpZigobW9kdWxlc0xpc3QubGVuZ3RoIC0gMSkgPT09IGkpe1xyXG5cdFx0XHRcdFx0XHRcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdC8vIH1lbHNlIGlmIChtb2R1bGVzTGlzdC5sZW5ndGggLSAxID09IGkpe1xyXG5cdFx0XHRcdC8vIFx0Y29uc29sZS5sb2coJ21vZHVsZXNMaXN0Lmxlbmd0aCcsIG1vZHVsZXNMaXN0Lmxlbmd0aClcclxuXHRcdFx0XHQvLyBcdHNlbGYudHJpZ2dlcignTW9kdWxlOkxvYWQnLCBtb2R1bGVzTGlzdCk7XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHJcblx0XHRsb2FkQ3NzOiBmdW5jdGlvbihtb2R1bGUsIG1kKSB7XHJcblx0XHRcdHZhciBwYXJ0VXBsID0gbWQgPT09ICdkaXNwbGF5JyA/ICdkaXNwbGF5cycgOiAnbW9kdWxlcyc7XHJcblx0XHRcdHZhciBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XHJcblx0XHRcdGxpbmsudHlwZSA9IFwidGV4dC9jc3NcIjtcclxuXHRcdFx0bGluay5yZWwgPSBcInN0eWxlc2hlZXRcIjtcclxuXHRcdFx0bGluay5ocmVmID0gJy4uLy4uL3RlbXBsYXRlLycgKyBwYXJ0VXBsICsgJy8nICsgbW9kdWxlICsgJy8nICsgbW9kdWxlICsgJy5jc3MnO1xyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XHJcblx0XHR9LFxyXG5cdFxyXG5cdFx0cmVuZGVySGFuZGxlYmFyc1RlbXBsYXRlOiBmdW5jdGlvbihzZWxlY3RvcixkYXRhKSB7XHJcblx0XHRcdC8vY29uc29sZS5sb2coJ9Ch0L7Qt9C00LDQtdC8INGI0LDQsdC70L7QvSBIYW5kbGViYXJzJywgc2VsZWN0b3IsIGRhdGEpO1xyXG5cdFxyXG5cdFx0XHR2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUoJChzZWxlY3RvcikuaHRtbCgpKTtcclxuXHRcdFx0cmV0dXJuIHRlbXBsYXRlKGRhdGEpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGFwcCA9IG5ldyBBcHAoKTtcclxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLSBSb3V0ZXIgLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuXHR2YXIgQXBwUm91dGVyID0gQmFja2JvbmUuUm91dGVyLmV4dGVuZCh7XHJcblx0ICAgIHJvdXRlczoge1xyXG5cdCAgICAgICAgXCJcIjogXCJkZWZhdWx0Um91dGVcIixcclxuXHQgICAgICAgIFwibGVzc29uc1wiOlwiZ2FsbGVyeVwiLFxyXG5cdCAgICAgICAgXCJnYW1lcy86dGVzdFwiOlwiZ2FtZXNcIixcclxuXHQgICAgICAgIFwiYm9vay86bmFtZVwiOlwicmVhZGVyXCIsXHJcblx0ICAgICAgICBcInZpZGVvLzpuYW1lXCI6XCJ2aWRlb1wiXHJcblx0ICAgICAgICAvLyBtYXRjaGVzIGh0dHA6Ly9leGFtcGxlLmNvbS8jYW55dGhpbmctaGVyZVxyXG5cdCAgICB9XHJcblx0fSk7XHJcblx0Ly8gSW5pdGlhdGUgdGhlIHJvdXRlclxyXG5cdHZhciByb3V0ZXIgPSBuZXcgQXBwUm91dGVyO1xyXG5cdFxyXG5cdHJvdXRlci5vbigncm91dGU6ZGVmYXVsdFJvdXRlJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnbWFpblNjcmVlbicsIFsncHJlbG9hZGVyJ10pO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpnYWxsZXJ5JywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ3JlZGxpbmUnLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOmdhbWVzJywgZnVuY3Rpb24oKSB7XHJcblx0ICAgIGFwcC5yb3V0ZSgnZ2FsbGVyeScsIFsncHJlbG9hZGVyJywnYWNjb3JkaW9uJywgJ3JlZGxpbmUnLCAnbWFpbm1lbnUnLCdyZWFkZXInLCAndHJhbnNmb3JtZXIzRCcsJ21hcHMnLCd2aWRlbycsJ2Fib3V0JywndGVzdHMnXSk7XHJcblx0XHJcblx0ICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHQgICAgICBhcHAuYnJlYWRjcnVtYnNSZW5kZXIoXCLQo9GA0L7QutC4INCS0LDQu9C10L3RgtC40L3QsCDQodC10YDQvtCy0LBcIixhcHAuZ2V0QWN0aXZlVGFiKCkpO1xyXG5cdCAgICB9LDIwMCk7XHJcblx0fSlcclxuXHRcclxuXHRyb3V0ZXIub24oJ3JvdXRlOnJlYWRlcicsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTp2aWRlbycsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0cm91dGVyLm9uKCdyb3V0ZTpyZXNldCcsIGZ1bmN0aW9uKCkge1xyXG5cdCAgICBhcHAucm91dGUoJ2dhbGxlcnknLCBbJ3ByZWxvYWRlcicsJ2FjY29yZGlvbicsICdyZWRsaW5lJywgJ21haW5tZW51JywncmVhZGVyJywgJ3RyYW5zZm9ybWVyM0QnLCdtYXBzJywndmlkZW8nLCdhYm91dCcsJ3Rlc3RzJ10pO1xyXG5cdFxyXG5cdCAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0ICAgICAgYXBwLmJyZWFkY3J1bWJzUmVuZGVyKFwi0KPRgNC+0LrQuCDQktCw0LvQtdC90YLQuNC90LAg0KHQtdGA0L7QstCwXCIsYXBwLmdldEFjdGl2ZVRhYigpKTtcclxuXHQgICAgfSwyMDApO1xyXG5cdH0pXHJcblx0XHJcblx0Ly8gU3RhcnQgQmFja2JvbmUgaGlzdG9yeSBhIG5lY2Vzc2FyeSBzdGVwIGZvciBib29rbWFya2FibGUgVVJMJ3NcclxuXHRCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KHtwdXNoU3RhdGUgOiBmYWxzZX0pO1xyXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tIFJvdXRlciAtLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cdC8qXHJcblx0KiBqUXVlcnkgQmFja2dyb3VuZCB2aWRlbyBwbHVnaW4gZm9yIGpRdWVyeVxyXG5cdCogLS0tXHJcblx0KiBDb3B5cmlnaHQgMjAxMSwgVmljdG9yIENvdWxvbiAoaHR0cDovL3ZpY3RvcmNvdWxvbi5mcilcclxuXHQqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQsIEJTRCwgYW5kIEdQTCBMaWNlbnNlcy5cclxuXHQqIGJhc2VkIG9uIGpRdWVyeSBQbHVnaW4gQm9pbGVycGxhdGUgMS4zXHJcblx0Ki9cclxuXHQoZnVuY3Rpb24oJCkge1xyXG5cdFxyXG5cdCAgJC5iYWNrZ3JvdW5kVmlkZW8gPSBmdW5jdGlvbihlbCwgb3B0aW9ucykge1xyXG5cdFxyXG5cdCAgICB2YXIgZGVmYXVsdHMgPSB7XHJcblx0ICAgICAgdmlkZW9pZDogXCJ2aWRlb19iYWNrZ3JvdW5kXCIsXHJcblx0ICAgICAgYXV0b3BsYXk6IGZhbHNlLFxyXG5cdCAgICAgIGxvb3A6IGZhbHNlLFxyXG5cdCAgICAgIHByZWxvYWQ6IHRydWVcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgcGx1Z2luID0gdGhpcztcclxuXHRcclxuXHQgICAgcGx1Z2luLnNldHRpbmdzID0ge31cclxuXHRcclxuXHQgICAgdmFyIGluaXQgPSBmdW5jdGlvbigpIHtcclxuXHQgICAgICBwbHVnaW4uc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG5cdCAgICAgIHBsdWdpbi5lbCA9IGVsO1xyXG5cdFxyXG5cdCAgICAgIGJ1aWxkVmlkZW8oKTtcclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgYnVpbGRWaWRlbyA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgaHRtbCA9ICcnLFxyXG5cdCAgICAgICAgICBwcmVsb2FkU3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGF1dG9wbGF5U3RyaW5nID0gJycsXHJcblx0ICAgICAgICAgIGxvb3BTdHJpbmcgPSAnJyxcclxuXHQgICAgICAgICAgX3ByZWxvYWQgPSBwbHVnaW4uc2V0dGluZ3MucHJlbG9hZCxcclxuXHQgICAgICAgICAgX2F1dG9wbGF5ID0gcGx1Z2luLnNldHRpbmdzLmF1dG9wbGF5LFxyXG5cdCAgICAgICAgICBfbG9vcCA9IHBsdWdpbi5zZXR0aW5ncy5sb29wO1xyXG5cdFxyXG5cdCAgICAgIGlmIChfcHJlbG9hZCkge1xyXG5cdCAgICAgICAgcHJlbG9hZFN0cmluZyA9ICdwcmVsb2FkPVwiZmFsc2VcIic7XHJcblx0ICAgICAgfSBlbHNlIHtcclxuXHQgICAgICAgIHByZWxvYWRTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9hdXRvcGxheSkge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnYXV0b3BsYXk9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgYXV0b3BsYXlTdHJpbmcgPSAnJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaWYgKF9sb29wKSB7XHJcblx0ICAgICAgICBsb29wU3RyaW5nID0gJ2xvb3A9XCJmYWxzZVwiJztcclxuXHQgICAgICB9IGVsc2Uge1xyXG5cdCAgICAgICAgbG9vcFN0cmluZyA9ICcnO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBodG1sICs9ICc8dmlkZW8gaWQ9XCInK3BsdWdpbi5zZXR0aW5ncy52aWRlb2lkKydcIicgKyBwcmVsb2FkU3RyaW5nICsgYXV0b3BsYXlTdHJpbmcgKyBsb29wU3RyaW5nO1xyXG5cdFxyXG5cdCAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MucG9zdGVyKSB7XHJcblx0ICAgICAgICBodG1sICs9ICcgcG9zdGVyPVwiJyArIHBsdWdpbi5zZXR0aW5ncy5wb3N0ZXIgKyAnXCIgJztcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgaHRtbCArPSAnc3R5bGU9XCJkaXNwbGF5Om5vbmU7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO2JvdHRvbTowO3JpZ2h0OjA7ei1pbmRleDoyO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7XCI+JztcclxuXHQgICAgICBmb3IodmFyIGk9MDsgaSA8IHBsdWdpbi5zZXR0aW5ncy50eXBlcy5sZW5ndGg7IGkrKykge1xyXG5cdCAgICAgICAgaHRtbCArPSAnPHNvdXJjZSBzcmM9XCInK3BsdWdpbi5zZXR0aW5ncy5wYXRoK3BsdWdpbi5zZXR0aW5ncy5maWxlbmFtZSsnLicrcGx1Z2luLnNldHRpbmdzLnR5cGVzW2ldKydcIiB0eXBlPVwidmlkZW8vJytwbHVnaW4uc2V0dGluZ3MudHlwZXNbaV0rJ1wiIC8+JztcclxuXHQgICAgICB9XHJcblx0ICAgICAgaHRtbCArPSAnPC92aWRlbz4nO1xyXG5cdCAgICAgIHBsdWdpbi5lbC5hcHBlbmQoaHRtbCk7XHJcblx0ICAgICAgcGx1Z2luLnZpZGVvRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChwbHVnaW4uc2V0dGluZ3MudmlkZW9pZCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsID0gJChwbHVnaW4udmlkZW9FbCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLmZhZGVJbigwKTtcclxuXHQgICAgICBzZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIHNldFByb3BvcnRpb24gPSBmdW5jdGlvbiAoKSB7XHJcblx0ICAgICAgdmFyIHByb3BvcnRpb24gPSBnZXRQcm9wb3J0aW9uKCk7XHJcblx0ICAgICAgcGx1Z2luLiR2aWRlb0VsLndpZHRoKHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLndpZHRoKTtcclxuXHQgICAgICBwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KHByb3BvcnRpb24qcGx1Z2luLnNldHRpbmdzLmhlaWdodCk7XHJcblx0XHJcblx0ICAgICAgaWYgKHR5cGVvZiBwbHVnaW4uc2V0dGluZ3MuYWxpZ24gIT09ICd1bmRlZmluZWQnKSB7XHJcblx0ICAgICAgICBjZW50ZXJWaWRlbygpO1xyXG5cdCAgICAgIH1cclxuXHQgICAgfVxyXG5cdFxyXG5cdCAgICB2YXIgZ2V0UHJvcG9ydGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuXHQgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcclxuXHQgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gJCh3aW5kb3cpLmhlaWdodCgpO1xyXG5cdCAgICAgIHZhciB3aW5kb3dQcm9wb3J0aW9uID0gd2luZG93V2lkdGggLyB3aW5kb3dIZWlnaHQ7XHJcblx0ICAgICAgdmFyIG9yaWdQcm9wb3J0aW9uID0gcGx1Z2luLnNldHRpbmdzLndpZHRoIC8gcGx1Z2luLnNldHRpbmdzLmhlaWdodDtcclxuXHQgICAgICB2YXIgcHJvcG9ydGlvbiA9IHdpbmRvd0hlaWdodCAvIHBsdWdpbi5zZXR0aW5ncy5oZWlnaHQ7XHJcblx0XHJcblx0ICAgICAgaWYgKHdpbmRvd1Byb3BvcnRpb24gPj0gb3JpZ1Byb3BvcnRpb24pIHtcclxuXHQgICAgICAgIHByb3BvcnRpb24gPSB3aW5kb3dXaWR0aCAvIHBsdWdpbi5zZXR0aW5ncy53aWR0aDtcclxuXHQgICAgICB9XHJcblx0XHJcblx0ICAgICAgcmV0dXJuIHByb3BvcnRpb247XHJcblx0ICAgIH1cclxuXHRcclxuXHQgICAgdmFyIGNlbnRlclZpZGVvID0gZnVuY3Rpb24oKSB7XHJcblx0ICAgICAgdmFyIGNlbnRlclggPSAoKCQod2luZG93KS53aWR0aCgpID4+IDEpIC0gKHBsdWdpbi4kdmlkZW9FbC53aWR0aCgpID4+IDEpKSB8IDA7XHJcblx0ICAgICAgdmFyIGNlbnRlclkgPSAoKCQod2luZG93KS5oZWlnaHQoKSA+PiAxKSAtIChwbHVnaW4uJHZpZGVvRWwuaGVpZ2h0KCkgPj4gMSkpIHwgMDtcclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYWScpIHtcclxuXHQgICAgICAgIHBsdWdpbi4kdmlkZW9FbC5jc3MoeyAnbGVmdCc6IGNlbnRlclgsICd0b3AnOiBjZW50ZXJZIH0pO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJYJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygnbGVmdCcsIGNlbnRlclgpO1xyXG5cdCAgICAgICAgcmV0dXJuO1xyXG5cdCAgICAgIH1cclxuXHRcclxuXHQgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFsaWduID09ICdjZW50ZXJZJykge1xyXG5cdCAgICAgICAgcGx1Z2luLiR2aWRlb0VsLmNzcygndG9wJywgY2VudGVyWSk7XHJcblx0ICAgICAgICByZXR1cm47XHJcblx0ICAgICAgfVxyXG5cdCAgICB9XHJcblx0XHJcblx0ICAgIGluaXQoKTtcclxuXHRcclxuXHQgICAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHsgc2V0UHJvcG9ydGlvbigpOyB9KTtcclxuXHQgIH1cclxuXHR9KSgkKTtcclxuXHJcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
